train:
  data:
    overfit_test: False
    training_slides:
      - 111
      - 199
      - 204
    validation_slides:
      - 76
    train_fraction: null
    patch_size: 317
    stride: 112
    downsample_factor: 3
    image_path: "VahadaneStainNormalizer(lambda_c=0.01,lambda_s=0.1,target=ZT111_4_C_7_1,thres=0.8)"
    tissue_mask_directory: "BrightnessThresholdTissueMask(blur_size=25,dilation_steps=5,erosion_steps=10,kernel_size=20)"
    normalizer:
      type: train
      mean:
        - 0.86489
        - 0.63272
        - 0.85928
      std:
        - 0.020820
        - 0.026320
        - 0.017309
    augmentations:
      rotation:
        degrees: 180
        crop: 224
      flip:
      color_jitter:
        saturation: 0.6
        contrast: 0.5
        brightness: 0.5
        hue: 0.4
    drop_multiclass_patches: False
    drop_tissue_patches: 0.0
    drop_validation_patches: False
    drop_unlabelled_patches: False
  model:
    architecture: "mobilenet_v2"
    pretrained: True
    dropout: 0.6
    freeze: 17
  metrics:
    - MultiLabelBalancedAccuracy
    - MultiLabelF1Score
    - MultiLabelAUCROC
    - MultiLabelBenignAccuracy
    - MultiLabelGleason3Accuracy
    - MultiLabelGleason4Accuracy
    - MultiLabelGleason5Accuracy
  params:
    experiment_name: "anv_wsss_pretrain"
    experiment_tags: null
    optimizer:
      class: "Adam"
      params:
        lr: 0.0001
      scheduler: null
    loss:
      class: "MultiLabelBCELoss"
    batch_size: 32
    nr_epochs: 2000
    num_workers: 24
    clip_gradient_norm: null
    dataset: "eth"
    seed: null
    validation_frequency: 2
test:
  data:
    tissue_mask_directory: "BrightnessThresholdTissueMask(blur_size=25,dilation_steps=5,erosion_steps=10,kernel_size=20)"
    normalizer:
      type: train
      mean:
        - 0.86489
        - 0.63272
        - 0.85928
      std:
        - 0.020820
        - 0.026320
        - 0.017309
  model:
    architecture: 's3://mlflow/633/19a9b40d174f40c4b217ddf84eb63e3b/artifacts/best.valid.MultiLabelBalancedAccuracy'
  params:
    experiment_name: "anv_wsss_test_cnn"
    experiment_tags: null
    dataset: eth
    batch_size: 32
    patch_size: 224
    threshold: 0.25
    num_workers: 8
    overlap: 200
    operation: argmax
    inference_mode: patch_based
    local_save_path: '/dataT/anv/Data/ETH/cnn_test_masks'
    mlflow_save_path: 'cnn_test_masks'
