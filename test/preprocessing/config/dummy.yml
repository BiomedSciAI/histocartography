
inputs:
- image_path
outputs:
- graph
stages:
  - io:
      class: "ImageLoader"
      inputs:
      - image_path
      outputs:
      - image
  - nuclei_extraction:
      class: "NucleiExtractor"
      inputs:
      - image
      outputs:
      - instance_map
      - instance_labels
      - instance_centroids
      params:
        model_path: "checkpoints/hovernet_pannuke.pth"
  - feature_extraction:
      class: "DeepFeatureExtractor"
      inputs:
      - image
      - instance_map
      outputs:
      - instance_features
      params:
        architecture: "resnet34"
        mask: False
        size: 72
  - graph_builders:
      class: "KNNGraphBuilder"
      inputs:
      - instance_centroids
      - instance_features
      outputs:
      - graph
      params:
        k: 5
        thresh: 50
        nr_classes: 6