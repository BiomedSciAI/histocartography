inputs:
- image_path
outputs:
- features
stages:
  - preprocessing:
      class: "ImageLoader"
      inputs:
      - image_path
      outputs:
      - image
  - preprocessing:
<<<<<<< HEAD:test/preprocessing/config/feature_extraction/deep_nuclei_feature_extractor_noaug.yml
      class: "NucleiExtractor"
=======
      class: "GridAugmentedDeepFeatureExtractor"
>>>>>>> 539b884e54a03d40f5e8a23b9ebf364aa57a8dda:test/preprocessing/config/feature_extraction/grid_deep_tissue_feature_extractor_aug.yml
      inputs:
      - image
      outputs:
      - instance_map
      - instance_centroids
      params:
        pretrained_data: 'pannuke'
  - preprocessing:
      class: "DeepFeatureExtractor"
      inputs:
      - image
      - instance_map
      outputs:
      - features
      params:
        architecture: mobilenet_v2
        num_workers: 1
<<<<<<< HEAD:test/preprocessing/config/feature_extraction/deep_nuclei_feature_extractor_noaug.yml
=======
        rotations:
          - 0
          - 90
        flips:
          - 'n'
          - 'h'
>>>>>>> 539b884e54a03d40f5e8a23b9ebf364aa57a8dda:test/preprocessing/config/feature_extraction/grid_deep_tissue_feature_extractor_aug.yml
        normalizer:
          type: imagenet
          mean:
            - 0.485
            - 0.456
            - 0.406
          std:
            - 0.229
            - 0.224
            - 0.225
<<<<<<< HEAD:test/preprocessing/config/feature_extraction/deep_nuclei_feature_extractor_noaug.yml
        patch_size: 76
        downsample_factor: 1
=======
        patch_size: 112
        stride: 112
        batch_size: 256
        downsample_factor: 1
>>>>>>> 539b884e54a03d40f5e8a23b9ebf364aa57a8dda:test/preprocessing/config/feature_extraction/grid_deep_tissue_feature_extractor_aug.yml
