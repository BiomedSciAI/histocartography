pipeline:
  inputs:
  - path
  - annotation_path
  stages:
    - io:
        class: ImageLoader
        inputs:
        - path
        outputs:
        - image
    - stain_normalizers:
        class: VahadaneStainNormalizer
        inputs:
        - image
        outputs:
        - normalized_image
        params:
          target: ZT76_39_B_2_1
    - tissue_mask:
        class: BrightnessThresholdTissueMask
        inputs:
        - normalized_image
        outputs:
        - tissue_mask
        params:
          blur_size: 25
          dilation_steps: 5
          erosion_steps: 10
          kernel_size: 20
params:
  dataset: eth
  save: True
  cores: 64
  labels: True
